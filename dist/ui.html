<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Design Token Export</title></head><body><h2>Design Token Export</h2><p>Extract your Figma design variables as DTCG-compliant design tokens.</p><div id="content" class="two-panel-layout"><div class="left-panel"><div class="option-group"><h3>Format Options</h3><div class="radio-item"><input type="radio" id="format-dtcg" name="format" value="dtcg" checked="checked"> <label for="format-dtcg">DTCG Format (Design Tokens Community Group)</label></div><div class="radio-item"><input type="radio" id="format-legacy" name="format" value="legacy"> <label for="format-legacy">Legacy Format (Simple JSON)</label></div><h3>Color Format</h3><div class="radio-item"><input type="radio" id="color-hex" name="color-format" value="hex" checked="checked"> <label for="color-hex">HEX (#ffffff)</label></div><div class="radio-item"><input type="radio" id="color-rgb" name="color-format" value="rgb"> <label for="color-rgb">RGB (rgb(255, 255, 255))</label></div><div class="radio-item"><input type="radio" id="color-rgba" name="color-format" value="rgba"> <label for="color-rgba">RGBA (rgba(255, 255, 255, 1))</label></div><div class="radio-item"><input type="radio" id="color-hsl" name="color-format" value="hsl"> <label for="color-hsl">HSL (hsl(0deg, 0%, 100%))</label></div><div class="radio-item"><input type="radio" id="color-hsla" name="color-format" value="hsla"> <label for="color-hsla">HSLA (hsla(0deg, 0%, 100%, 1))</label></div><h3>Export Options</h3><div class="checkbox-item"><input type="checkbox" id="separate-files" checked="checked"> <label for="separate-files">Export separate files (one per collection/mode)</label></div><div class="checkbox-item"><input type="checkbox" id="validate-references" checked="checked"> <label for="validate-references">Validate and fix references</label></div><div class="checkbox-item"><input type="checkbox" id="flat-structure"> <label for="flat-structure">Generate flat structure (easier reference resolution)</label></div></div><div class="selection-group"><h3>Collections & Modes <span class="select-all" id="toggle-all-collections">Select All</span></h3><div id="collection-modes-list"><div class="loading"><div class="spinner"></div>Loading collections and modes...</div></div></div><div><button id="extract-btn">Refresh Tokens</button> <button id="download-btn" disabled="disabled">Download JSON</button> <button id="validate-btn">Validate References</button></div></div><div class="right-panel"><div id="reference-validation-results" class="reference-validation" style="display: none;"><h3>Reference Validation</h3><div id="validation-content">Validating references...</div></div><div id="preview-container"><div class="preview-toggle-container"><h3>Preview</h3><div class="segmented-toggle" id="preview-mode-toggle"><div class="segmented-toggle-option active" data-mode="json">JSON</div><div class="segmented-toggle-option" data-mode="visual">Visual</div></div></div><div class="preview-content-json active"><div class="preview-tabs" id="preview-tabs"><button class="tab-button active" data-tab="combined">Combined</button></div><div class="preview-content"><div class="tab-content" id="tab-combined" style="display: block;"><pre id="output">Loading data...</pre></div></div></div><div class="preview-content-visual" id="visual-preview-container"></div></div></div></div><div id="status" class="info">Waiting for data...</div><script>(()=>{"use strict";var n={28:(n,e,t)=>{t.d(e,{A:()=>s});var o=t(601),r=t.n(o),a=t(314),i=t.n(a)()(r());i.push([n.id,"/* src/ui/styles/components/diagnostics.css */\n/**\n * Reference diagnostics and validation styles\n */\n\n.reference-validation {\n  background-color: var(--color-warning);\n  background-color: rgba(255, 193, 7, 0.1);\n  padding: var(--space-2) var(--space-3);\n  border-radius: var(--radius-md);\n  border-left: 4px solid var(--color-warning);\n  margin-top: var(--space-4);\n  font-size: var(--font-size-xs);\n}\n\n.reference-problem {\n  color: var(--color-danger);\n  font-weight: var(--font-weight-medium);\n  padding: var(--space-1) 0;\n}\n\n.validation-tools {\n  margin-top: var(--space-4);\n  padding-top: var(--space-2);\n  border-top: 1px solid var(--color-gray-300);\n}\n\n/* Reference diagnosis styles */\n.reference-diagnosis {\n  margin-top: var(--space-5);\n  padding: var(--space-3);\n  border-radius: var(--radius-md);\n  border: 1px solid var(--color-gray-300);\n  background-color: var(--color-gray-100);\n}\n\n.reference-diagnosis h3 {\n  margin-top: 0;\n  margin-bottom: var(--space-3);\n  font-size: var(--font-size-sm);\n  font-weight: var(--font-weight-semibold);\n}\n\n.reference-diagnosis h4 {\n  margin-top: var(--space-4);\n  margin-bottom: var(--space-2);\n  font-size: var(--font-size-sm);\n  font-weight: var(--font-weight-medium);\n}\n\n.diagnosis-success {\n  display: flex;\n  align-items: center;\n  padding: var(--space-2) var(--space-3);\n  background-color: rgba(40, 167, 69, 0.1);\n  border-radius: var(--radius-md);\n  color: var(--color-success);\n  font-weight: var(--font-weight-medium);\n}\n\n.diagnosis-success svg {\n  margin-right: var(--space-2);\n}\n\n.diagnosis-summary {\n  padding: var(--space-2) var(--space-3);\n  background-color: rgba(255, 193, 7, 0.1);\n  border-radius: var(--radius-md);\n  color: var(--color-warning);\n  margin-bottom: var(--space-3);\n}\n\n.reference-table {\n  width: 100%;\n  border-collapse: collapse;\n  font-size: var(--font-size-xs);\n  margin-bottom: var(--space-4);\n}\n\n.reference-table th {\n  text-align: left;\n  padding: var(--space-1) var(--space-2);\n  background-color: var(--color-gray-200);\n  border: 1px solid var(--color-gray-300);\n}\n\n.reference-table td {\n  padding: var(--space-1) var(--space-2);\n  border: 1px solid var(--color-gray-300);\n  vertical-align: top;\n}\n\n.reference-value {\n  font-family: var(--font-family-monospace);\n  color: var(--color-primary);\n}\n\n.reference-value.suggested {\n  color: var(--color-success);\n  font-weight: var(--font-weight-medium);\n}\n\n.potential-match {\n  display: flex;\n  justify-content: space-between;\n  padding: var(--space-1) 0;\n  border-bottom: 1px solid var(--color-gray-200);\n}\n\n.potential-match:last-child {\n  border-bottom: none;\n}\n\n.match-path {\n  font-family: var(--font-family-monospace);\n}\n\n.match-similarity {\n  margin-left: var(--space-2);\n  color: var(--color-gray-600);\n  font-size: var(--font-size-xs);\n}\n\n.no-matches {\n  color: var(--color-danger);\n  font-style: italic;\n}\n\n.fix-button {\n  background-color: var(--color-primary);\n  color: var(--color-white);\n  padding: var(--space-1) var(--space-2);\n  border: none;\n  border-radius: var(--radius-sm);\n  cursor: pointer;\n  font-size: var(--font-size-xs);\n  margin: 0;\n}\n\n.fix-button:hover {\n  background-color: var(--color-primary-dark);\n}\n\n.fix-actions {\n  margin-top: var(--space-3);\n  text-align: right;\n}\n\n.fix-description {\n  margin-bottom: var(--space-2);\n  color: var(--color-gray-600);\n  font-size: var(--font-size-xs);\n}\n\n.reference-recommendations {\n  background-color: rgba(23, 162, 184, 0.1);\n  padding: var(--space-2) var(--space-3);\n  border-radius: var(--radius-md);\n  margin-top: var(--space-4);\n}\n\n.reference-recommendations ul {\n  margin: var(--space-2) 0 0 0;\n  padding-left: var(--space-5);\n}\n\n.reference-recommendations li {\n  margin-bottom: var(--space-1);\n  font-size: var(--font-size-xs);\n}",""]);const s=i},56:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},72:n=>{var e=[];function t(n){for(var t=-1,o=0;o<e.length;o++)if(e[o].identifier===n){t=o;break}return t}function o(n,o){for(var a={},i=[],s=0;s<n.length;s++){var l=n[s],c=o.base?l[0]+o.base:l[0],d=a[c]||0,p="".concat(c," ").concat(d);a[c]=d+1;var u=t(p),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)e[u].references++,e[u].updater(f);else{var v=r(f,o);o.byIndex=s,e.splice(s,0,{identifier:p,updater:v,references:1})}i.push(p)}return i}function r(n,e){var t=e.domAPI(e);return t.update(n),function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,r){var a=o(n=n||[],r=r||{});return function(n){n=n||[];for(var i=0;i<a.length;i++){var s=t(a[i]);e[s].references--}for(var l=o(n,r),c=0;c<a.length;c++){var d=t(a[c]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}a=l}}},113:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},266:(n,e,t)=>{t.d(e,{A:()=>s});var o=t(601),r=t.n(o),a=t(314),i=t.n(a)()(r());i.push([n.id,'/* src/ui/styles/components/tabs.css */\n/**\n * Tab component styles\n */\n\n .preview-tabs {\n    display: flex;\n    flex-wrap: wrap;\n    border-bottom: 1px solid #ddd;\n    margin-bottom: 10px;\n    gap: 4px;\n  }\n  \n  .tab-button {\n    padding: 6px 12px;\n    background-color: #f0f0f0;\n    border: 1px solid #ddd;\n    border-bottom: none;\n    border-radius: 4px 4px 0 0;\n    cursor: pointer;\n    font-size: 11px;\n    font-weight: 500;\n    color: #555;\n    position: relative;\n    bottom: -1px;\n    margin-bottom: 0;\n    margin-top: 0; /* Override the general button margin */\n  }\n  \n  .tab-button:hover {\n    background-color: #e5e5e5;\n  }\n  \n  .tab-button.active {\n    background-color: white;\n    border-bottom: 1px solid white;\n    color: #18a0fb;\n    z-index: 1;\n  }\n  \n  .preview-content {\n    position: relative;\n    border: 1px solid #ddd;\n    border-top: none;\n    padding: 10px;\n    border-radius: 0 0 4px 4px;\n    background-color: white;\n  }\n  \n  .tab-content {\n    display: none; /* Hide all tab content by default */\n  }\n  \n  /* Make sure the active tab content is visible */\n  .tab-content.active,\n  .tab-content[style*="display: block"] {\n    display: block !important;\n  }\n  \n  /* Fix any overflow issues */\n  .preview-content pre {\n    margin: 0;\n    white-space: pre-wrap;\n    word-break: break-word;\n    overflow-x: auto;\n  }\n  \n  /* Preview toggle container */\n  .preview-toggle-container {\n    display: flex;\n    margin-bottom: 12px;\n    align-items: center;\n    justify-content: space-between;\n  }\n  \n  .preview-toggle-container h3 {\n    margin: 0;\n  }\n  \n  /* Custom styles for preview containers */\n  .preview-content-json,\n  .preview-content-visual {\n    display: none;\n  }\n  \n  .preview-content-json.active,\n  .preview-content-visual.active {\n    display: block;\n  }',""]);const s=i},314:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map((function(e){var t="",o=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),o&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),o&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t})).join("")},e.i=function(n,t,o,r,a){"string"==typeof n&&(n=[[null,n,void 0]]);var i={};if(o)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(i[l]=!0)}for(var c=0;c<n.length;c++){var d=[].concat(n[c]);o&&i[d[0]]||(void 0!==a&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=a),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),e.push(d))}},e}},339:(n,e,t)=>{t.d(e,{A:()=>s});var o=t(601),r=t.n(o),a=t(314),i=t.n(a)()(r());i.push([n.id,"/* src/ui/styles/layout.css */\n/**\n * Layout styles for the token manager UI\n */\n\n/* Two-panel layout */\n.two-panel-layout {\n  display: grid;\n  grid-template-columns: 280px 1fr;\n  gap: var(--space-6);\n  margin-bottom: var(--space-6);\n}\n\n.left-panel {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-4);\n}\n\n.right-panel {\n  display: flex;\n  flex-direction: column;\n  gap: var(--space-4);\n}\n\n/* For smaller screens */\n@media (max-width: 700px) {\n  .two-panel-layout {\n    grid-template-columns: 1fr;\n  }\n}\n\n/* Plugin title and container */\n.plugin-title {\n  margin-top: 0;\n  margin-bottom: var(--space-4);\n  font-size: var(--font-size-xl);\n  font-weight: var(--font-weight-bold);\n  color: var(--color-gray-900);\n}\n\n.plugin-container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: var(--space-4);\n}\n\n/* Preview container layout */\n#preview-container {\n  border: 1px solid var(--color-gray-300);\n  border-radius: var(--radius-md);\n  overflow: hidden;\n}\n\n.preview-container__header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: var(--space-3);\n  background-color: var(--color-gray-100);\n  border-bottom: 1px solid var(--color-gray-300);\n}\n\n.preview-container__content {\n  padding: var(--space-3);\n  max-height: 400px;\n  overflow: auto;\n}\n\n/* Section containers */\n.selection-group {\n  margin-top: 16px;\n  margin-bottom: 16px;\n  padding: 12px;\n  border: 1px solid #e5e5e5;\n  border-radius: 4px;\n  background-color: #f9f9f9;\n}\n\n.option-group {\n  margin-top: 16px;\n  margin-bottom: 16px;\n  padding: 12px;\n  border: 1px solid #e5e5e5;\n  border-radius: 4px;\n  background-color: #f0f7ff;\n}\n\n/* Make the preview container take the full available height */\n#preview-container {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-height: 400px;\n}\n\n/* Ensure the preview content expands to fill available space */\n.preview-content {\n  flex: 1;\n  min-height: 300px;\n  display: flex;\n  flex-direction: column;\n}\n\n.preview-content pre {\n  flex: 1;\n  margin: 0;\n  min-height: 200px;\n}\n\n/* Scrollable areas for collections and modes */\n#collection-modes-list {\n  max-height: 320px;\n  overflow-y: auto;\n  padding-right: 8px;\n}\n\n/* Responsive adjustments */\n@media (max-width: 700px) {\n  .two-panel-layout {\n    flex-direction: column;\n  }\n\n  .left-panel {\n    flex: none;\n    width: 100%;\n  }\n\n  .right-panel {\n    width: 100%;\n  }\n}\n\n/* Collection/Mode tree structure */\n.collection-item {\n  margin-bottom: 10px;\n  border-left: 3px solid #e0e0e0;\n  padding-left: 8px;\n}\n\n.collection-header {\n  display: flex;\n  align-items: center;\n  font-weight: 500;\n  margin-bottom: 4px;\n  padding: 4px;\n  border-radius: 4px;\n  background-color: #f0f0f0;\n}\n\n.collection-header:hover {\n  background-color: #e5e5e5;\n}\n\n.mode-container {\n  margin-left: 20px;\n  padding-top: 2px;\n  padding-bottom: 2px;\n}\n\n.mode-item {\n  display: flex;\n  align-items: center;\n  padding: 3px 0;\n}\n\n.mode-item label {\n  margin-left: 8px;\n  cursor: pointer;\n}",""]);const s=i},396:(n,e,t)=>{t.d(e,{A:()=>s});var o=t(601),r=t.n(o),a=t(314),i=t.n(a)()(r());i.push([n.id,"/* src/ui/styles/components/tokens.css */\n/**\n * Token preview component styles\n */\n\n .token-preview-wrapper {\n    margin-top: 16px;\n  }\n  \n  .token-preview-container {\n    border: 1px solid #e5e5e5;\n    border-radius: 4px;\n    overflow: hidden;\n    background: white;\n  }\n  \n  .token-preview-heading {\n    background-color: #f0f0f0;\n    padding: 8px 12px;\n    font-weight: 600;\n    font-size: 12px;\n    border-bottom: 1px solid #e5e5e5;\n  }\n  \n  .token-preview-subheading {\n    padding: 6px 12px;\n    font-weight: 500;\n    font-size: 11px;\n    background-color: #f9f9f9;\n    border-bottom: 1px solid #f0f0f0;\n  }\n  \n  /* Grid layout for token items */\n  .token-preview-items-grid {\n    display: flex;\n    flex-wrap: wrap;\n    gap: 2px;\n    padding: 2px;\n    background-color: #f0f0f0;\n  }\n  \n  .token-preview-item {\n    display: flex;\n    align-items: center;\n    padding: 10px;\n    background-color: white;\n    transition: all 0.2s ease;\n    flex: 1 0 calc(50% - 2px);\n    max-width: calc(50% - 2px);\n    box-sizing: border-box;\n    border-radius: 3px;\n  }\n  \n  .token-preview-item:hover {\n    background-color: #f9f9f9;\n    transform: translateY(-1px);\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);\n  }\n  \n  /* Color tokens */\n  .color-swatch {\n    width: 48px;\n    height: 48px;\n    border-radius: 8px;\n    margin-right: 12px;\n    border: 1px solid rgba(0, 0, 0, 0.1);\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n    position: relative;\n    flex-shrink: 0;\n  }\n  \n  .color-swatch.transparent {\n    background-image: \n      linear-gradient(45deg, #eee 25%, transparent 25%),\n      linear-gradient(-45deg, #eee 25%, transparent 25%),\n      linear-gradient(45deg, transparent 75%, #eee 75%),\n      linear-gradient(-45deg, transparent 75%, #eee 75%);\n    background-size: 10px 10px;\n    background-position: 0 0, 0 5px, 5px -5px, -5px 0px;\n  }\n  \n  /* Reference tokens */\n  .color-swatch.reference-token.unresolved-reference {\n    background-image: \n      linear-gradient(45deg, #f0f0f0 25%, #cccccc 25%),\n      linear-gradient(-45deg, #f0f0f0 25%, #cccccc 25%),\n      linear-gradient(45deg, #cccccc 75%, #f0f0f0 75%),\n      linear-gradient(-45deg, #cccccc 75%, #f0f0f0 75%);\n    background-size: 8px 8px;\n    border: 1px dashed #999;\n  }\n  \n  /* Reference indicator */\n  .reference-icon {\n    position: absolute;\n    top: 2px;\n    right: 2px;\n    width: 12px;\n    height: 12px;\n    color: #0366d6;\n    background: hsl(0deg 0% 100% / 80%);\n    font-size: 9px;\n    border-radius: 4px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);\n    z-index: 2;\n  }\n  \n  .reference-label {\n    display: inline-block;\n    margin-left: 4px;\n    padding: 1px 4px;\n    background: #e8f0fe;\n    color: #0366d6;\n    font-size: 8px;\n    border-radius: 2px;\n    vertical-align: middle;\n  }\n  \n  .resolved-value {\n    display: inline-block;\n    margin-left: 4px;\n    padding: 1px 4px;\n    background: #e6ffed;\n    color: #22863a;\n    font-size: 8px;\n    border-radius: 2px;\n    vertical-align: middle;\n  }\n  \n  /* Token info structure */\n  .token-info {\n    flex: 1;\n    margin-left: 6px;\n    overflow: hidden;\n  }\n  \n  .token-path {\n    font-weight: 500;\n    font-size: 12px;\n    color: #333;\n    margin-bottom: 4px;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n  \n  .token-value {\n    font-family: monospace;\n    font-size: 11px;\n    color: #666;\n    white-space: nowrap;\n    overflow: hidden;\n    text-overflow: ellipsis;\n  }\n  \n  /* Other token type visualizations */\n  .dimension-swatch {\n    height: 16px;\n    display: flex;\n    align-items: center;\n    margin-right: 12px;\n    min-width: 90px;\n    max-width: 120px;\n    position: relative;\n    flex-shrink: 0;\n  }\n  \n  .dimension-bar {\n    height: 6px;\n    background-color: #0366d6;\n    border-radius: 3px;\n    min-width: 4px;\n  }\n  \n  /* Typography tokens */\n  .font-family-sample,\n  .font-weight-sample {\n    width: 40px;\n    height: 40px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin-right: 12px;\n    background: #f5f5f5;\n    border-radius: 4px;\n    font-size: 18px;\n  }\n  \n  .font-size-sample {\n    height: 40px;\n    min-width: 40px;\n    display: flex;\n    align-items: center;\n    margin-right: 12px;\n    background: #f5f5f5;\n    padding: 0 8px;\n    border-radius: 4px;\n    line-height: 1;\n    overflow: hidden;\n  }\n  \n  .line-height-sample {\n    width: 80px;\n    min-height: 40px;\n    display: flex;\n    align-items: center;\n    margin-right: 12px;\n    background: #f5f5f5;\n    padding: 4px 8px;\n    border-radius: 4px;\n    font-size: 10px;\n    line-height: inherit;\n    overflow: hidden;\n  }\n  \n  .letter-spacing-sample {\n    height: 40px;\n    min-width: 80px;\n    display: flex;\n    align-items: center;\n    margin-right: 12px;\n    background: #f5f5f5;\n    padding: 0 8px;\n    border-radius: 4px;\n    font-size: 14px;\n    overflow: hidden;\n  }\n  \n  /* Duration tokens */\n  .duration-swatch {\n    width: 100px;\n    height: 16px;\n    margin-right: 12px;\n    background: #f5f5f5;\n    border-radius: 8px;\n    overflow: hidden;\n    position: relative;\n  }\n  \n  .duration-bar {\n    position: absolute;\n    height: 100%;\n    width: 100%;\n    background: linear-gradient(90deg, transparent, #0366d6, transparent);\n    animation: duration-animation 2s infinite;\n    transform: translateX(-100%);\n  }\n  \n  @keyframes duration-animation {\n    0% { transform: translateX(-100%); }\n    100% { transform: translateX(100%); }\n  }\n  \n  /* Shadow tokens */\n  .shadow-swatch {\n    width: 60px;\n    height: 40px;\n    margin-right: 12px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  \n  .shadow-box {\n    width: 40px;\n    height: 20px;\n    background: white;\n    border-radius: 4px;\n  }\n  \n  /* Generic tokens */\n  .generic-swatch {\n    width: 24px;\n    height: 24px;\n    border-radius: 4px;\n    margin-right: 12px;\n    background: #f0f0f0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    position: relative;\n  }\n  \n  .generic-indicator {\n    font-size: 12px;\n    font-weight: bold;\n    color: #666;\n  }\n  \n  /* Smaller reference icon for non-color tokens */\n  .reference-icon-small {\n    position: absolute;\n    top: -2px;\n    right: -2px;\n    width: 10px;\n    height: 10px;\n    background: #0366d6;\n    color: white;\n    font-size: 8px;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 1;\n  }\n  \n  /* Token detail panel */\n  .token-detail-panel {\n    position: absolute;\n    z-index: 10;\n    background: white;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n    padding: 12px;\n    min-width: 260px;\n    max-width: 400px;\n  }\n  \n  .token-detail-header {\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 12px;\n  }\n  \n  .token-detail-title {\n    font-weight: 600;\n    font-size: 12px;\n  }\n  \n  .token-detail-close {\n    cursor: pointer;\n    font-size: 16px;\n    line-height: 1;\n    color: #999;\n  }\n  \n  .token-detail-content {\n    margin-bottom: 12px;\n  }\n  \n  .token-detail-row {\n    display: flex;\n    margin-bottom: 6px;\n    font-size: 11px;\n  }\n  \n  .token-detail-label {\n    font-weight: 500;\n    width: 80px;\n    color: #666;\n  }\n  \n  .token-detail-value {\n    font-family: monospace;\n    flex: 1;\n    word-break: break-all;\n  }\n  \n  .token-usage-label {\n    font-weight: 500;\n    font-size: 11px;\n    margin-top: 12px;\n    margin-bottom: 4px;\n    color: #666;\n  }\n  \n  .token-copy-button {\n    font-size: 10px;\n    padding: 2px 6px;\n    background: #f5f5f5;\n    border: 1px solid #ddd;\n    border-radius: 3px;\n    cursor: pointer;\n    margin-left: 4px;\n  }\n  \n  .token-copy-button:hover {\n    background: #e5e5e5;\n  }\n  \n  .token-visualization {\n    margin-top: 8px;\n    padding: 8px;\n    background: #f9f9f9;\n    border-radius: 4px;\n    max-height: 80px;\n    overflow: hidden;\n  }\n  \n  /* Reference visualization */\n  .reference-visualization {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 8px;\n    background: #f5f5f5;\n    border-radius: 4px;\n  }\n  \n  .reference-token-wrapper,\n  .reference-target-wrapper {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    min-width: 100px;\n  }\n  \n  .reference-token-wrapper {\n    color: #0366d6;\n    font-family: monospace;\n    font-size: 11px;\n  }\n  \n  .reference-target-wrapper {\n    color: #22863a;\n    font-family: monospace;\n    font-size: 11px;\n  }\n  \n  .reference-preview {\n    margin-top: 4px;\n    width: 24px;\n    height: 24px;\n    border-radius: 4px;\n    border: 1px solid rgba(0, 0, 0, 0.1);\n  }\n  \n  .reference-arrow {\n    font-size: 18px;\n    color: #0366d6;\n    margin: 0 8px;\n  }\n  \n  /* Responsive adjustments */\n  @media (max-width: 600px) {\n    .token-preview-item {\n      flex: 1 0 100%;\n      max-width: 100%;\n    }\n  }",""]);const s=i},490:(n,e,t)=>{t.d(e,{A:()=>s});var o=t(601),r=t.n(o),a=t(314),i=t.n(a)()(r());i.push([n.id,'/**\n * Styles for the collection list component\n */\n\n.collection-section {\n  margin-bottom: 16px;\n}\n\n.collection-section h2 {\n  font-size: 14px;\n  margin-bottom: 8px;\n}\n\n#collection-list {\n  max-height: 200px;\n  overflow-y: auto;\n  border: 1px solid var(--figma-color-border);\n  border-radius: 2px;\n  padding: 8px;\n}\n\n.checkbox-item {\n  display: flex;\n  align-items: center;\n  margin-bottom: 6px;\n}\n\n.checkbox-item:last-child {\n  margin-bottom: 0;\n}\n\n.checkbox-item input[type="checkbox"] {\n  margin-right: 8px;\n}\n\n.checkbox-item label {\n  font-size: 12px;\n  cursor: pointer;\n}\n\n.loading {\n  font-size: 12px;\n  color: var(--figma-color-text-secondary);\n  font-style: italic;\n  padding: 4px 0;\n}\n',""]);const s=i},529:(n,e,t)=>{t.d(e,{A:()=>x});var o=t(601),r=t.n(o),a=t(314),i=t.n(a),s=t(734),l=t(339),c=t(266),d=t(396),p=t(566),u=t(28),f=t(921),v=t(490),g=t(910),m=t(898),h=t(901),b=i()(r());b.i(s.A),b.i(l.A),b.i(c.A),b.i(d.A),b.i(p.A),b.i(u.A),b.i(f.A),b.i(v.A),b.i(g.A),b.i(m.A),b.i(h.A),b.push([n.id,"/**\n * Main stylesheet entry point\n * Imports all component and layout styles\n */\n\n/* Base styles */\n\n/* Layout styles */\n\n/* Component styles */",""]);const x=b},540:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},566:(n,e,t)=>{t.d(e,{A:()=>s});var o=t(601),r=t.n(o),a=t(314),i=t.n(a)()(r());i.push([n.id,"/* src/ui/styles/components/toggle.css */\n/**\n * Segmented toggle component styles\n */\n\n .segmented-toggle {\n    display: flex;\n    background-color: #f0f0f0;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    overflow: hidden;\n    height: 28px;\n  }\n  \n  .segmented-toggle-option {\n    padding: 4px 12px;\n    cursor: pointer;\n    font-size: 12px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    min-width: 80px;\n    transition: background-color 0.2s, color 0.2s;\n    user-select: none;\n  }\n  \n  .segmented-toggle-option:not(:last-child) {\n    border-right: 1px solid #ddd;\n  }\n  \n  .segmented-toggle-option.active {\n    background-color: #18a0fb;\n    color: white;\n    font-weight: 500;\n  }\n  \n  .segmented-toggle-option:not(.active):hover {\n    background-color: #e5e5e5;\n  }\n  \n  /* Form controls */\n  .checkbox-item {\n    display: flex;\n    align-items: center;\n    margin-bottom: 8px;\n  }\n  \n  .checkbox-item label {\n    margin-left: 8px;\n    cursor: pointer;\n  }\n  \n  .radio-item {\n    display: flex;\n    align-items: center;\n    margin-bottom: 8px;\n  }\n  \n  .radio-item label {\n    margin-left: 8px;\n    cursor: pointer;\n  }",""]);const s=i},601:n=>{n.exports=function(n){return n[1]}},659:n=>{var e={};n.exports=function(n,t){var o=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}},734:(n,e,t)=>{t.d(e,{A:()=>s});var o=t(601),r=t.n(o),a=t(314),i=t.n(a)()(r());i.push([n.id,'/* src/ui/styles/base.css */\n/**\n * Base styles for the Figma Token Manager\n * Contains reset and global styles\n */\n\n :root {\n  /* Color system */\n  --color-primary: #0066FF;\n  --color-primary-light: #4D94FF;\n  --color-primary-dark: #0047B3;\n  \n  --color-secondary: #6C757D;\n  --color-secondary-light: #A1A8AE;\n  --color-secondary-dark: #494F54;\n  \n  --color-success: #28A745;\n  --color-info: #17A2B8;\n  --color-warning: #FFC107;\n  --color-danger: #DC3545;\n  \n  --color-gray-100: #F8F9FA;\n  --color-gray-200: #E9ECEF;\n  --color-gray-300: #DEE2E6;\n  --color-gray-400: #CED4DA;\n  --color-gray-500: #ADB5BD;\n  --color-gray-600: #6C757D;\n  --color-gray-700: #495057;\n  --color-gray-800: #343A40;\n  --color-gray-900: #212529;\n  \n  --color-white: #FFFFFF;\n  --color-black: #000000;\n  \n  /* Typography */\n  --font-family-base: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;\n  --font-family-monospace: SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;\n  \n  --font-size-xs: 0.75rem;   /* 12px */\n  --font-size-sm: 0.875rem;  /* 14px */\n  --font-size-md: 1rem;      /* 16px */\n  --font-size-lg: 1.125rem;  /* 18px */\n  --font-size-xl: 1.25rem;   /* 20px */\n  --font-size-2xl: 1.5rem;   /* 24px */\n  --font-size-3xl: 1.875rem; /* 30px */\n  --font-size-4xl: 2.25rem;  /* 36px */\n  \n  --font-weight-light: 300;\n  --font-weight-normal: 400;\n  --font-weight-medium: 500;\n  --font-weight-semibold: 600;\n  --font-weight-bold: 700;\n  \n  --line-height-tight: 1.25;\n  --line-height-snug: 1.375;\n  --line-height-normal: 1.5;\n  --line-height-relaxed: 1.625;\n  --line-height-loose: 2;\n  \n  /* Spacing system */\n  --space-1: 0.25rem;  /* 4px */\n  --space-2: 0.5rem;   /* 8px */\n  --space-3: 0.75rem;  /* 12px */\n  --space-4: 1rem;     /* 16px */\n  --space-5: 1.25rem;  /* 20px */\n  --space-6: 1.5rem;   /* 24px */\n  --space-8: 2rem;     /* 32px */\n  --space-10: 2.5rem;  /* 40px */\n  --space-12: 3rem;    /* 48px */\n  --space-16: 4rem;    /* 64px */\n  --space-20: 5rem;    /* 80px */\n  --space-24: 6rem;    /* 96px */\n  \n  /* Border radius */\n  --radius-sm: 0.125rem;  /* 2px */\n  --radius-md: 0.25rem;   /* 4px */\n  --radius-lg: 0.5rem;    /* 8px */\n  --radius-xl: 1rem;      /* 16px */\n  --radius-full: 9999px;\n  \n  /* Shadows */\n  --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);\n  --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);\n  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);\n  --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);\n  \n  /* Transitions */\n  --transition-fast: 150ms;\n  --transition-normal: 300ms;\n  --transition-slow: 500ms;\n  --transition-timing: cubic-bezier(0.4, 0, 0.2, 1);\n  \n  /* Z-index */\n  --z-index-dropdown: 1000;\n  --z-index-sticky: 1020;\n  --z-index-fixed: 1030;\n  --z-index-modal-backdrop: 1040;\n  --z-index-modal: 1050;\n  --z-index-popover: 1060;\n  --z-index-tooltip: 1070;\n  \n  /* Component-specific variables */\n  --header-height: 60px;\n  --sidebar-width: 280px;\n  --footer-height: 40px;\n  --token-preview-item-height: 48px;\n  --token-preview-grid-gap: var(--space-4);\n  \n  /* Token specific variables */\n  --token-item-border-color: var(--color-gray-300);\n  --token-item-bg: var(--color-white);\n  --token-item-hover-bg: var(--color-gray-100);\n  --token-item-border-radius: var(--radius-md);\n  --token-item-padding: var(--space-3);\n}\nbody {\n  font-family: var(--font-family-base);\n  margin: 0;\n  padding: var(--space-5);\n  font-size: var(--font-size-sm);\n  color: var(--color-gray-800);\n  overflow-y: auto;\n  height: 100vh;\n  box-sizing: border-box;\n}\n\nh2 {\n  margin-bottom: var(--space-4);\n  font-size: var(--font-size-lg);\n  font-weight: var(--font-weight-semibold);\n}\n\nh3 {\n  margin-top: var(--space-4);\n  margin-bottom: var(--space-2);\n  font-size: var(--font-size-md);\n  font-weight: var(--font-weight-medium);\n}\n\np {\n  margin-bottom: var(--space-4);\n  color: var(--color-gray-600);\n}\n\nbutton {\n  background-color: var(--color-primary);\n  color: var(--color-white);\n  border: none;\n  border-radius: var(--radius-md);\n  padding: var(--space-2) var(--space-4);\n  margin-right: var(--space-2);\n  margin-top: var(--space-4);\n  cursor: pointer;\n  font-weight: var(--font-weight-medium);\n}\n\nbutton:hover {\n  background-color: var(--color-primary-dark);\n}\n\nbutton:disabled {\n  background-color: var(--color-gray-400);\n  cursor: not-allowed;\n}\n\npre {\n  background-color: var(--color-gray-100);\n  padding: var(--space-2) var(--space-3);\n  border-radius: var(--radius-md);\n  overflow: auto;\n  font-family: var(--font-family-monospace);\n  font-size: var(--font-size-xs);\n}\n\n/* Status indicators */\n#status {\n  margin-top: var(--space-4);\n  padding: var(--space-2) var(--space-3);\n  border-radius: var(--radius-md);\n  font-size: var(--font-size-sm);\n}\n\n.info {\n  background-color: rgba(23, 162, 184, 0.1);\n  color: var(--color-info);\n}\n\n.success {\n  background-color: rgba(40, 167, 69, 0.1);\n  color: var(--color-success);\n}\n\n.warning {\n  background-color: rgba(255, 193, 7, 0.1);\n  color: var(--color-warning);\n}\n\n.error {\n  background-color: rgba(220, 53, 69, 0.1);\n  color: var(--color-danger);\n}\n\n/* Loading indicator */\n.loading {\n  display: flex;\n  align-items: center;\n  font-style: italic;\n  color: var(--color-gray-600);\n}\n\n.spinner {\n  display: inline-block;\n  width: 12px;\n  height: 12px;\n  margin-right: var(--space-2);\n  border: 2px solid var(--color-gray-200);\n  border-top: 2px solid var(--color-primary);\n  border-radius: 50%;\n  animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n  0% { transform: rotate(0deg); }\n  100% { transform: rotate(360deg); }\n}\n\n/* Utility classes */\n.select-all {\n  font-size: var(--font-size-xs);\n  color: var(--color-primary);\n  cursor: pointer;\n  margin-left: var(--space-4);\n}\n\n.pill {\n  display: inline-block;\n  padding: var(--space-1) var(--space-2);\n  margin-right: var(--space-1);\n  border-radius: var(--radius-full);\n  font-size: var(--font-size-xs);\n  font-weight: var(--font-weight-medium);\n  background-color: var(--color-primary-light);\n  color: var(--color-primary-dark);\n}',""]);const s=i},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var o="";t.supports&&(o+="@supports (".concat(t.supports,") {")),t.media&&(o+="@media ".concat(t.media," {"));var r=void 0!==t.layer;r&&(o+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),o+=t.css,r&&(o+="}"),t.media&&(o+="}"),t.supports&&(o+="}");var a=t.sourceMap;a&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),e.styleTagTransform(o,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}},898:(n,e,t)=>{t.d(e,{A:()=>s});var o=t(601),r=t.n(o),a=t(314),i=t.n(a)()(r());i.push([n.id,"/**\n * Styles for JSON preview component\n */\n\n.preview-section {\n  margin-top: var(--space-4);\n}\n\n.preview-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: var(--space-2);\n}\n\n.preview-header h2 {\n  font-size: var(--font-size-sm);\n  margin: 0;\n}\n\n#preview-container {\n  border: 1px solid var(--color-gray-300);\n  border-radius: var(--radius-md);\n  overflow: hidden;\n  transition: max-height var(--transition-normal) var(--transition-timing);\n  max-height: 300px;\n}\n\n#preview-container.collapsed {\n  max-height: 0;\n}\n\n#preview-content {\n  height: 300px;\n  overflow: auto;\n  margin: 0;\n  padding: var(--space-2);\n  font-family: var(--font-family-monospace);\n  font-size: var(--font-size-xs);\n  background-color: var(--color-gray-100);\n  color: var(--color-gray-800);\n  white-space: pre-wrap;\n}\n\n#toggle-preview {\n  border: none;\n  background: none;\n  cursor: pointer;\n  padding: var(--space-1) var(--space-2);\n  color: var(--color-gray-600);\n  font-size: var(--font-size-xs);\n}\n\n#toggle-preview:hover {\n  color: var(--color-gray-800);\n}\n",""]);const s=i},901:(n,e,t)=>{t.d(e,{A:()=>s});var o=t(601),r=t.n(o),a=t(314),i=t.n(a)()(r());i.push([n.id,"/**\n * Styles for action buttons\n */\n\n.button-container {\n  display: flex;\n  gap: var(--space-2);\n  margin-top: var(--space-4);\n}\n\n.button-primary,\n.button-secondary {\n  border: none;\n  border-radius: var(--radius-lg);\n  padding: var(--space-2) var(--space-4);\n  font-weight: var(--font-weight-medium);\n  cursor: pointer;\n  transition: background-color var(--transition-fast) var(--transition-timing);\n  font-size: var(--font-size-sm);\n}\n\n.button-primary {\n  background-color: var(--color-primary);\n  color: var(--color-white);\n}\n\n.button-primary:hover {\n  background-color: var(--color-primary-dark);\n}\n\n.button-primary:disabled {\n  background-color: var(--color-gray-400);\n  color: var(--color-gray-200);\n  cursor: not-allowed;\n}\n\n.button-secondary {\n  background-color: var(--color-secondary);\n  color: var(--color-white);\n}\n\n.button-secondary:hover {\n  background-color: var(--color-secondary-dark);\n}\n\n.button-secondary:disabled {\n  background-color: var(--color-gray-400);\n  color: var(--color-gray-200);\n  cursor: not-allowed;\n}\n",""]);const s=i},910:(n,e,t)=>{t.d(e,{A:()=>s});var o=t(601),r=t.n(o),a=t(314),i=t.n(a)()(r());i.push([n.id,"/**\n * Styles for status indicator component\n */\n\n.status {\n  padding: 8px 12px;\n  margin: 10px 0;\n  border-radius: 4px;\n  font-size: 12px;\n  display: flex;\n  align-items: center;\n}\n\n.status.info {\n  background-color: #e3f2fd;\n  color: #0d47a1;\n  border-left: 4px solid #2196f3;\n}\n\n.status.success {\n  background-color: #e8f5e9;\n  color: #1b5e20;\n  border-left: 4px solid #4caf50;\n}\n\n.status.error {\n  background-color: #ffebee;\n  color: #b71c1c;\n  border-left: 4px solid #f44336;\n}\n\n.status.warning {\n  background-color: #fff8e1;\n  color: #ff6f00;\n  border-left: 4px solid #ffc107;\n}\n",""]);const s=i},921:(n,e,t)=>{t.d(e,{A:()=>s});var o=t(601),r=t.n(o),a=t(314),i=t.n(a)()(r());i.push([n.id,'/* src/ui/styles/components/forms.css */\n/**\n * Form controls and input styles\n */\n\n/* Input fields */\ninput[type="text"],\ninput[type="number"],\nselect,\ntextarea {\n  padding: var(--space-2);\n  border: 1px solid var(--color-gray-400);\n  border-radius: var(--radius-md);\n  font-size: var(--font-size-sm);\n  width: 100%;\n  box-sizing: border-box;\n  font-family: var(--font-family-base);\n}\n\ninput[type="text"]:focus,\ninput[type="number"]:focus,\nselect:focus,\ntextarea:focus {\n  border-color: var(--color-primary);\n  outline: none;\n  box-shadow: 0 0 0 2px var(--color-primary-light);\n}\n\n/* Dropdowns and selects */\n.dropdown-select {\n  padding: 6px 8px;\n  border-radius: 4px;\n  border: 1px solid #ccc;\n  background-color: white;\n  font-size: 12px;\n}\n\n/* Button groups */\n.export-options {\n  margin-top: 16px;\n  display: flex;\n  gap: 8px;\n}\n\n/* Form groups */\n.form-group {\n  margin-bottom: var(--space-4);\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: var(--space-2);\n  font-weight: var(--font-weight-medium);\n  font-size: 12px;\n  color: var(--color-gray-800);\n}\n\n/* Form layout */\n.form-row {\n  display: flex;\n  gap: 8px;\n  margin-bottom: 12px;\n}\n\n.form-row > div {\n  flex: 1;\n}\n\n/* Checkboxes and radio buttons with improved styling */\n.checkbox-item,\n.radio-item {\n  display: flex;\n  align-items: center;\n  margin-bottom: 8px;\n}\n\n.checkbox-item input[type="checkbox"],\n.radio-item input[type="radio"] {\n  margin-right: var(--space-2);\n}\n\n.checkbox-item label,\n.radio-item label {\n  margin-left: 0;\n  cursor: pointer;\n  font-size: 12px;\n}',""]);const s=i}},e={};function t(o){var r=e[o];if(void 0!==r)return r.exports;var a=e[o]={id:o,exports:{}};return n[o](a,a.exports,t),a.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var o in e)t.o(e,o)&&!t.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:e[o]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.nc=void 0;var o=t(72),r=t.n(o),a=t(825),i=t.n(a),s=t(659),l=t.n(s),c=t(56),d=t.n(c),p=t(540),u=t.n(p),f=t(113),v=t.n(f),g=t(529),m={};function h(n){try{return JSON.stringify(n,null,2)}catch(n){return console.error("Error formatting JSON:",n),JSON.stringify({error:"Error formatting JSON",message:n instanceof Error?n.message:String(n)})}}function b(n,e,t,o){if(!n||0===e.length)return{};const r={};for(const o of e)if(n[o]){r[o]={};const e=t.get(o)||[];for(const t in n[o])e.includes(t)&&(r[o][t]=n[o][t]);0===Object.keys(r[o]).length&&delete r[o]}return o?function(n){const e={};return function n(t,o){t&&"object"==typeof t&&Object.entries(t).forEach((([t,r])=>{const a=o?`${o}.${t}`:t;r&&"object"==typeof r&&!("$value"in r)?n(r,a):e[a]=r}))}(n,""),e}(r):r}function x(n,e){const t=JSON.stringify(n,null,2),o=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(o),a=document.createElement("a");a.href=r,a.download=e,a.click(),URL.revokeObjectURL(r)}function y(n,e,t,o,r){console.log(`Setting active tab: ${n}`);const a=e.querySelectorAll(".tab-button"),i=t.querySelectorAll(".tab-content");a.forEach((n=>n.classList.remove("active"))),i.forEach((n=>{n.style.display="none"}));const s=e.querySelector(`.tab-button[data-tab="${n}"]`);s?s.classList.add("active"):console.error(`Tab button not found: ${n}`);const l=document.getElementById(`tab-${n}`);l?l.style.display="block":console.error(`Tab content not found: tab-${n}`),o&&r&&r(o)}function k(n,e){const t={};return function n(e,o){if(e&&"object"==typeof e)if(void 0===e.$value)for(const r in e){const a=o?`${o}.${r}`:r;"object"==typeof e[r]&&null!==e[r]?n(e[r],a):t[a]=e[r]}else t[o]=Object.assign({},e);else t[o]=e}(e,n),t}function w(n){const e={};function t(n,o="",r=""){if(n&&"object"==typeof n)if(void 0===n.$value||void 0===n.$type)for(const e in n){const a=o?`${o}/${e}`:e,i=r?`${r}.${e}`:e;"object"==typeof n[e]&&null!==n[e]&&t(n[e],a,i)}else{const t=o.replace(/\//g,".");e[t]={value:n.$value,type:n.$type,originalPath:r},e[o]={value:n.$value,type:n.$type,originalPath:r};const a=o.split(/[\/\.]/),i=a[a.length-1];i&&i!==o&&(e[i]||(e[i]={value:n.$value,type:n.$type,originalPath:r}));let s="",l="";for(let c=a.length-1;c>=0;c--)s?(s=a[c]+"/"+s,l=a[c]+"."+l):(s=a[c],l=a[c]),e[s]||s===o||s===i||(e[s]={value:n.$value,type:n.$type,originalPath:r}),e[l]||l===t||l===i||(e[l]={value:n.$value,type:n.$type,originalPath:r})}}for(const e in n)for(const o in n[e])t(n[e][o],`${e}/${o}`,`${e}.${o}`);return e}function $(n,e,t=new Set){if(!n||"string"!=typeof n)return{value:n,type:"unknown",isResolved:!1};if(!n.startsWith("{")||!n.endsWith("}"))return{value:n,type:"unknown",isResolved:!1};const o=n.substring(1,n.length-1);if(t.has(o))return console.warn(`Circular reference detected: ${o}`),{value:n,type:"reference",originalReference:n,isResolved:!1};if(t.add(o),e[o]){const r=e[o];if("string"==typeof r.value&&r.value.startsWith("{")&&r.value.endsWith("}")){const a=$(r.value,e,t);return Object.assign(Object.assign({},a),{originalReference:n,originalPath:r.originalPath,resolvedFrom:o})}return{value:r.value,type:r.type,originalReference:n,originalPath:r.originalPath,isResolved:!0,resolvedFrom:o}}const r=o.includes("/")?o.replace(/\//g,"."):o.replace(/\./g,"/");if(e[r]){const o=e[r];if("string"==typeof o.value&&o.value.startsWith("{")&&o.value.endsWith("}")){const a=$(o.value,e,t);return Object.assign(Object.assign({},a),{originalReference:n,originalPath:o.originalPath,resolvedFrom:r})}return{value:o.value,type:o.type,originalReference:n,originalPath:o.originalPath,isResolved:!0,resolvedFrom:r}}for(const a in e)if(a!==o&&(a.endsWith(`/${o}`)||a.endsWith(`.${o}`)||a.endsWith(`/${r}`)||a.endsWith(`.${r}`))){const o=e[a];if("string"==typeof o.value&&o.value.startsWith("{")&&o.value.endsWith("}")){const r=$(o.value,e,t);return Object.assign(Object.assign({},r),{originalReference:n,originalPath:o.originalPath,resolvedFrom:a})}return{value:o.value,type:o.type,originalReference:n,originalPath:o.originalPath,isResolved:!0,resolvedFrom:a}}const a=o.split(/[\/\.]/);for(let o=a.length-1;o>0;o--){const r=a.slice(a.length-o).join("/"),i=a.slice(a.length-o).join(".");if(e[r]){const o=e[r];if("string"==typeof o.value&&o.value.startsWith("{")&&o.value.endsWith("}")){const a=$(o.value,e,t);return Object.assign(Object.assign({},a),{originalReference:n,originalPath:o.originalPath,resolvedFrom:r})}return{value:o.value,type:o.type,originalReference:n,originalPath:o.originalPath,isResolved:!0,resolvedFrom:r}}if(e[i]){const o=e[i];if("string"==typeof o.value&&o.value.startsWith("{")&&o.value.endsWith("}")){const r=$(o.value,e,t);return Object.assign(Object.assign({},r),{originalReference:n,originalPath:o.originalPath,resolvedFrom:i})}return{value:o.value,type:o.type,originalReference:n,originalPath:o.originalPath,isResolved:!0,resolvedFrom:i}}}return{value:n,type:"reference",originalReference:n,isResolved:!1}}function E(n){const e=w(n),t=[],o=[];function r(n,i=""){if(n&&"object"==typeof n){if(void 0!==n.$value&&"string"==typeof n.$value&&n.$value.startsWith("{")&&n.$value.endsWith("}")){const r=n.$value,s=r.substring(1,r.length-1);if(!$(r,e).isResolved){const n=function(n,e){const t=[];for(const o in e){const e=a(n,o);if(e>.5){const n=o.replace(/\//g,".");t.push({path:n,similarity:e})}}return t.sort(((n,e)=>e.similarity-n.similarity)).slice(0,5)}(s,e);if(t.push({path:i,reference:s,potentialMatches:n}),n.length>0&&n[0].similarity>.7){const e=n[0].path.replace(/\//g,".");o.push({path:i,original:r,suggested:`{${e}}`})}}}if(Array.isArray(n))n.forEach(((n,e)=>{r(n,`${i}[${e}]`)}));else for(const e in n){const t=i?`${i}.${e}`:e;r(n[e],t)}}}function a(n,e){const t=n.toLowerCase(),o=e.toLowerCase(),r=t.replace(/\//g,"."),a=o.replace(/\//g,".");if(r.includes(a)||a.includes(r))return.8;const i=r.split("."),s=a.split(".");let l=0;for(const n of i)s.includes(n)&&l++;if(l>0)return.5+.5*l/Math.max(i.length,s.length);let c=0;const d=Math.min(r.length,a.length);for(let n=0;n<d;n++)r[n]===a[n]&&c++;return c/Math.max(r.length,a.length)}for(const e in n)for(const t in n[e])r(n[e][t],`${e}.${t}`);return{unresolvedReferences:t,suggestedFixes:o}}function z(n,e,t,o){const r=function(n){const e=[];function t(n,o=""){if(n&&"object"==typeof n)if(void 0===n.$value||void 0===n.$type)for(const r in n){const a=o?`${o}/${r}`:r,i=n[r];if("object"==typeof i&&null!==i)t(i,a);else{const n=C(i);n&&e.push({path:a,type:n,value:i,originalValue:i})}}else e.push({path:o,type:n.$type,value:n.$value,originalValue:n.$value})}for(const e in n)for(const o in n[e])t(n[e][o],`${e}/${o}`);return e}(n),a=w(n),{numResolved:i,numUnresolved:s}=function(n,e){let t=0,o=0;for(const r of n){const n=r.value;if("string"==typeof n&&n.startsWith("{")&&n.endsWith("}")){const a=$(n,e);a.isResolved?(r.referencedValue=a.value,r.referencedType=a.type,r.resolvedFrom=a.resolvedFrom,"reference"===r.type&&a.type&&(r.type=a.type),t++):o++}}return{numResolved:t,numUnresolved:o}}(r,a);o&&o(i,s);const l=e.querySelector(".token-preview-wrapper");l&&l.remove();const c=function(n){if(0===n.length)return'<div class="token-preview-container"><div class="token-preview-heading">No tokens found</div></div>';const e={};n.forEach((n=>{e[n.type]||(e[n.type]=[]),e[n.type].push(n)}));let t='<div class="token-preview-container">';t+='<div class="token-preview-heading">Visual Token Preview</div>',e.color&&(t+=function(n){let e='<div class="token-preview-heading">Color Tokens</div>';const t={};n.forEach((n=>{const e=n.path.split("/");if(e.length>=2){const o=e[0];t[o]||(t[o]=[]),t[o].push(n)}}));for(const n in t)e+=`<div class="token-preview-subheading">${n}</div>`,e+='<div class="token-preview-items-grid">',t[n].forEach((n=>{const t="string"==typeof n.value&&n.value.startsWith("{")&&n.value.endsWith("}");let o,r="",a="",i="";t?void 0!==n.referencedValue?(o=n.referencedValue,r="reference-token resolved-reference",n.value,i=n.resolvedFrom?`data-resolved-from="${n.resolvedFrom}"`:""):(o="#cccccc",r="reference-token unresolved-reference"):(o=n.value,(String(n.value).includes("rgba")||String(n.value).includes("hsla")||String(n.value).startsWith("#")&&9===String(n.value).length)&&(r="transparent"));const s=n.path.split("/").slice(2).join("/");e+=`\n        <div class="token-preview-item color-preview-item" \n             data-token-path="${n.path}" \n             data-token-value="${n.value}" \n             data-token-type="${n.type}"\n             ${n.referencedValue?`data-referenced-value="${n.referencedValue}"`:""}\n             ${n.referencedType?`data-referenced-type="${n.referencedType}"`:""}\n             ${i}>\n          <div class="color-swatch ${r}" style="background-color: ${o}">\n            ${t?'<div class="reference-icon">↗</div>':""}\n          </div>\n          <div class="token-info">\n            <div class="token-path">${s}</div>\n            <div class="token-value">\n              ${n.value}\n              ${t?'<span class="reference-label">Reference</span>':""}\n              ${t&&n.referencedValue?`<span class="resolved-value">${n.referencedValue}</span>`:""}\n            </div>\n          </div>\n        </div>\n      `})),e+="</div>";return e}(e.color)),e.dimension&&(t+=function(n){let e='<div class="token-preview-heading">Dimension Tokens</div>';const t={};n.forEach((n=>{const e=n.path.split("/");if(e.length>=2){const o=e[0];t[o]||(t[o]=[]),t[o].push(n)}}));for(const n in t)e+=`<div class="token-preview-subheading">${n}</div>`,e+='<div class="token-preview-items-grid">',t[n].forEach((n=>{const t="string"==typeof n.value&&n.value.startsWith("{")&&n.value.endsWith("}"),o=t&&void 0!==n.referencedValue?n.referencedValue:n.value,r=n.path.split("/").slice(2).join("/"),a=String(o).replace(/[^0-9.]/g,""),i=Math.min(parseFloat(a)||0,200),s=n.resolvedFrom?`data-resolved-from="${n.resolvedFrom}"`:"";e+=`\n        <div class="token-preview-item dimension-preview-item" \n             data-token-path="${n.path}" \n             data-token-value="${n.value}" \n             data-token-type="${n.type}"\n             ${n.referencedValue?`data-referenced-value="${n.referencedValue}"`:""}\n             ${n.referencedType?`data-referenced-type="${n.referencedType}"`:""}\n             ${s}>\n          <div class="dimension-swatch">\n            <div class="dimension-bar" style="width: ${i}px"></div>\n            ${t?'<div class="reference-icon-small">↗</div>':""}\n          </div>\n          <div class="token-info">\n            <div class="token-path">${r}</div>\n            <div class="token-value">\n              ${n.value}\n              ${t?'<span class="reference-label">Reference</span>':""}\n              ${t&&n.referencedValue?`<span class="resolved-value">${n.referencedValue}</span>`:""}\n            </div>\n          </div>\n        </div>\n      `})),e+="</div>";return e}(e.dimension));const o=["fontFamily","fontWeight","fontSize","lineHeight","letterSpacing"];let r=!1;for(const n of o)if(e[n]&&e[n].length>0){r=!0;break}if(r){t+='<div class="token-preview-heading">Typography Tokens</div>';for(const n of o)e[n]&&(t+=S(e[n],n))}e.duration&&(t+=function(n){let e='<div class="token-preview-heading">Duration Tokens</div>';return e+='<div class="token-preview-items-grid">',n.forEach((n=>{const t="string"==typeof n.value&&n.value.startsWith("{")&&n.value.endsWith("}"),o=t&&void 0!==n.referencedValue?n.referencedValue:n.value,r=n.path.split("/").slice(2).join("/");let a=1e3;const i=String(o);i.includes("ms")?a=parseFloat(i):i.includes("s")&&(a=1e3*parseFloat(i));const s=Math.min(a/1e3,5),l=n.resolvedFrom?`data-resolved-from="${n.resolvedFrom}"`:"";e+=`\n      <div class="token-preview-item duration-preview-item" \n           data-token-path="${n.path}" \n           data-token-value="${n.value}" \n           data-token-type="${n.type}"\n           ${n.referencedValue?`data-referenced-value="${n.referencedValue}"`:""}\n           ${n.referencedType?`data-referenced-type="${n.referencedType}"`:""}\n           ${l}>\n        <div class="duration-swatch">\n          <div class="duration-bar" style="animation-duration: ${s}s"></div>\n          ${t?'<div class="reference-icon-small">↗</div>':""}\n        </div>\n        <div class="token-info">\n          <div class="token-path">${r}</div>\n          <div class="token-value">\n            ${n.value}\n            ${t?'<span class="reference-label">Reference</span>':""}\n            ${t&&n.referencedValue?`<span class="resolved-value">${n.referencedValue}</span>`:""}\n          </div>\n        </div>\n      </div>\n    `})),e+="</div>",e}(e.duration)),e.shadow&&(t+=function(n){let e='<div class="token-preview-heading">Shadow Tokens</div>';return e+='<div class="token-preview-items-grid">',n.forEach((n=>{const t="string"==typeof n.value&&n.value.startsWith("{")&&n.value.endsWith("}"),o=t&&void 0!==n.referencedValue?n.referencedValue:n.value,r=n.path.split("/").slice(2).join("/"),a=n.resolvedFrom?`data-resolved-from="${n.resolvedFrom}"`:"";e+=`\n      <div class="token-preview-item shadow-preview-item" \n           data-token-path="${n.path}" \n           data-token-value="${n.value}" \n           data-token-type="${n.type}"\n           ${n.referencedValue?`data-referenced-value="${n.referencedValue}"`:""}\n           ${n.referencedType?`data-referenced-type="${n.referencedType}"`:""}\n           ${a}>\n        <div class="shadow-swatch">\n          <div class="shadow-box" style="box-shadow: ${o}"></div>\n          ${t?'<div class="reference-icon-small">↗</div>':""}\n        </div>\n        <div class="token-info">\n          <div class="token-path">${r}</div>\n          <div class="token-value">\n            ${n.value}\n            ${t?'<span class="reference-label">Reference</span>':""}\n            ${t&&n.referencedValue?`<span class="resolved-value">${n.referencedValue}</span>`:""}\n          </div>\n        </div>\n      </div>\n    `})),e+="</div>",e}(e.shadow));const a=new Set(["color","dimension","fontFamily","fontWeight","fontSize","lineHeight","letterSpacing","duration","shadow"]);let i=!1;for(const n in e)if(!a.has(n)){i=!0;break}if(i){t+='<div class="token-preview-heading">Other Tokens</div>';for(const n in e)a.has(n)||(t+=F(e[n],n))}return t+="</div>",t}(r),d=document.createElement("div");d.className="token-preview-wrapper",d.innerHTML=c,e.appendChild(d),function(n){n.addEventListener("click",(n=>{const e=n.target.closest(".token-preview-item");e&&function(n,e,t,o,r="",a="",i=""){document.querySelectorAll(".token-detail-panel").forEach((n=>{n.remove()}));const s=document.createElement("div");s.className="token-detail-panel";const l=n.getBoundingClientRect();s.style.top=`${l.bottom+window.scrollY+8}px`,s.style.left=`${l.left+window.scrollX}px`;const c="string"==typeof t&&t.startsWith("{")&&t.endsWith("}"),d=c?t.substring(1,t.length-1):"",p=`--${e.split("/").slice(2).join("-").toLowerCase()}`,u=r||t,f=function(n,e){switch(n){case"color":return`color: var(${e});`;case"dimension":return`margin: var(${e});`;case"fontFamily":return`font-family: var(${e});`;case"fontWeight":return`font-weight: var(${e});`;case"fontSize":return`font-size: var(${e});`;case"lineHeight":return`line-height: var(${e});`;case"letterSpacing":return`letter-spacing: var(${e});`;case"shadow":return`box-shadow: var(${e});`;default:return`/* Custom property: */ var(${e});`}}(o,p),v=`${e.split("/").slice(2).join("-").toLowerCase()}`;let g="";g=c?`\n      <div class="reference-visualization">\n        <div class="reference-token-wrapper">\n          <div>${t}</div>\n        </div>\n        <div class="reference-arrow">⟶</div>\n        <div class="reference-target-wrapper">\n          <div>${r||"Not resolved"}</div>\n          ${r?`<div class="reference-preview" style="${"color"===o?`background-color: ${r};`:""}"></div>`:""}\n        </div>\n      </div>\n    `:function(n,e){switch(n){case"color":return`<div style="width: 100%; height: 30px; background-color: ${e}; border-radius: 4px;"></div>`;case"dimension":const n=String(e).replace(/[^0-9.]/g,"");return`<div style="width: 100%; height: 20px; background: #f0f0f0; border-radius: 4px; overflow: hidden;">\n                <div style="width: ${Math.min(parseFloat(n),100)}%; height: 100%; background: #0366d6;"></div>\n              </div>`;case"fontFamily":return`<div style="font-family: ${e}; font-size: 16px; text-align: center;">The quick brown fox jumps over the lazy dog</div>`;case"fontWeight":return`<div style="font-weight: ${e}; font-size: 16px; text-align: center;">The quick brown fox jumps over the lazy dog</div>`;case"fontSize":return`<div style="font-size: ${Math.min(parseFloat(e),24)+"px"}; text-align: center; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">The quick brown fox jumps over the lazy dog</div>`;case"lineHeight":return`<div style="line-height: ${e}; font-size: 12px; text-align: center;">Line 1<br>Line 2</div>`;case"letterSpacing":return`<div style="letter-spacing: ${e}; font-size: 14px; text-align: center;">THE QUICK BROWN FOX</div>`;case"shadow":return`<div style="width: 60px; height: 30px; margin: 0 auto; background: white; border-radius: 4px; box-shadow: ${e};"></div>`;default:return`<div style="text-align: center; color: #666;">${e}</div>`}}(o,u);let m=`\n    <div class="token-detail-header">\n      <div class="token-detail-title">${function(n){const e=n.split("/");if(e.length<3)return n;const t=e[0],o=e[1],r=e[e.length-1],a=e.slice(2,-1).join("/");return`<strong>${r}</strong> <span style="color: #666; font-size: 10px;">(${t}/${o}${a?"/"+a:""})</span>`}(e)}</div>\n      <div class="token-detail-close">&times;</div>\n    </div>\n    \n    <div class="token-detail-content">\n      <div class="token-detail-row">\n        <div class="token-detail-label">Path:</div>\n        <div class="token-detail-value">${e}</div>\n      </div>\n      <div class="token-detail-row">\n        <div class="token-detail-label">Type:</div>\n        <div class="token-detail-value">${L(o)}</div>\n      </div>\n      <div class="token-detail-row">\n        <div class="token-detail-label">Value:</div>\n        <div class="token-detail-value">\n          ${t}\n          <button class="token-copy-button" data-copy-value="${t}">Copy</button>\n          ${c?'<span class="reference-label">Reference</span>':""}\n        </div>\n      </div>\n  `;c&&(m+=`\n      <div class="token-detail-row">\n        <div class="token-detail-label">References:</div>\n        <div class="token-detail-value">${d}</div>\n      </div>\n    `,r?(m+=`\n      <div class="token-detail-row">\n        <div class="token-detail-label">Resolved Value:</div>\n        <div class="token-detail-value">\n          ${r}\n          <button class="token-copy-button" data-copy-value="${r}">Copy</button>\n        </div>\n      </div>\n      `,i&&(m+=`\n        <div class="token-detail-row">\n          <div class="token-detail-label">Resolved From:</div>\n          <div class="token-detail-value">\n            ${i}\n          </div>\n        </div>\n        `),a&&(m+=`\n        <div class="token-detail-row">\n          <div class="token-detail-label">Ref Type:</div>\n          <div class="token-detail-value">\n            ${L(a)}\n          </div>\n        </div>\n        `)):m+='\n      <div class="token-detail-row">\n        <div class="token-detail-label">Resolved Value:</div>\n        <div class="token-detail-value">\n          <span style="color: #d32f2f;">Unresolved reference</span>\n        </div>\n      </div>\n      '),m+=`\n    </div>\n    \n    <div class="token-visualization">\n      ${g}\n    </div>\n  `,m+=`\n    <div class="token-usage-label">CSS Variable:</div>\n    <div class="token-detail-row">\n      <div class="token-detail-value">\n        ${p}\n        <button class="token-copy-button" data-copy-value="${p}">Copy</button>\n      </div>\n    </div>\n    \n    <div class="token-usage-label">CSS Usage:</div>\n    <div class="token-detail-row">\n      <div class="token-detail-value">\n        ${f}\n        <button class="token-copy-button" data-copy-value="${f}">Copy</button>\n      </div>\n    </div>\n    \n    <div class="token-usage-label">SCSS Variable:</div>\n    <div class="token-detail-row">\n      <div class="token-detail-value">\n        ${v}\n        <button class="token-copy-button" data-copy-value="${v}">Copy</button>\n      </div>\n    </div>\n  `,s.innerHTML=m,document.body.appendChild(s),s.querySelectorAll(".token-copy-button").forEach((n=>{n.addEventListener("click",(n=>{const e=n.currentTarget,t=e.dataset.copyValue||"";navigator.clipboard.writeText(t).then((()=>{e.textContent="Copied!",setTimeout((()=>{e.textContent="Copy"}),1e3)})),n.stopPropagation()}))}));const h=s.querySelector(".token-detail-close");h&&h.addEventListener("click",(()=>{s.remove()})),document.addEventListener("click",(function e(t){s.contains(t.target)||n.contains(t.target)||(s.remove(),document.removeEventListener("click",e))}))}(e,e.dataset.tokenPath||"",e.dataset.tokenValue||"",e.dataset.tokenType||"",e.dataset.referencedValue||"",e.dataset.referencedType||"",e.dataset.resolvedFrom||"")}))}(d)}function C(n){if("string"==typeof n){if(n.startsWith("{")&&n.endsWith("}"))return"reference";if(n.startsWith("#")||n.startsWith("rgb")||n.startsWith("hsl"))return"color";if(/^-?\d*\.?\d+(px|rem|em|%|vh|vw|vmin|vmax|pt|pc|in|cm|mm)$/.test(n))return"dimension";if(n.includes(",")&&(n.includes("sans-serif")||n.includes("serif")||n.includes("monospace")))return"fontFamily";if(/^(normal|bold|lighter|bolder|\d{3})$/.test(n))return"fontWeight";if(/^-?\d*\.?\d+(s|ms)$/.test(n))return"duration";if(n.includes("px")&&n.includes("rgba"))return"shadow"}else{if("number"==typeof n)return"number";if("boolean"==typeof n)return"boolean"}return"string"}function S(n,e){let t=`<div class="token-preview-subheading">${L(e)}</div>`;return t+='<div class="token-preview-items-grid">',n.forEach((n=>{const o="string"==typeof n.value&&n.value.startsWith("{")&&n.value.endsWith("}"),r=o&&void 0!==n.referencedValue?n.referencedValue:n.value,a=n.path.split("/").slice(2).join("/");let i="";switch(e){case"fontFamily":i=`<div class="font-family-sample" style="font-family: ${r}">Aa</div>`;break;case"fontWeight":i=`<div class="font-weight-sample" style="font-weight: ${r}">Aa</div>`;break;case"fontSize":const n=String(r),e=parseFloat(n),t=n.replace(/[0-9.]/g,"");i=`<div class="font-size-sample" style="font-size: ${e>32?`${Math.min(32,e)}${t}`:n}">Aa</div>`;break;case"lineHeight":i=`\n          <div class="line-height-sample">\n            <div style="line-height: ${r}">Line 1<br>Line 2<br>Line 3</div>\n          </div>\n        `;break;case"letterSpacing":i=`<div class="letter-spacing-sample" style="letter-spacing: ${r}">Spacing</div>`;break;default:i=`<div class="typography-sample">${r}</div>`}const s=n.resolvedFrom?`data-resolved-from="${n.resolvedFrom}"`:"";t+=`\n      <div class="token-preview-item typography-preview-item" \n           data-token-path="${n.path}" \n           data-token-value="${n.value}" \n           data-token-type="${n.type}"\n           ${n.referencedValue?`data-referenced-value="${n.referencedValue}"`:""}\n           ${n.referencedType?`data-referenced-type="${n.referencedType}"`:""}\n           ${s}>\n        ${i}\n        ${o?'<div class="reference-icon-small">↗</div>':""}\n        <div class="token-info">\n          <div class="token-path">${a}</div>\n          <div class="token-value">\n            ${n.value}\n            ${o?'<span class="reference-label">Reference</span>':""}\n            ${o&&n.referencedValue?`<span class="resolved-value">${n.referencedValue}</span>`:""}\n          </div>\n        </div>\n      </div>\n    `})),t+="</div>",t}function F(n,e){let t=`<div class="token-preview-subheading">${L(e)} Tokens</div>`;return t+='<div class="token-preview-items-grid">',n.forEach((n=>{const o="string"==typeof n.value&&n.value.startsWith("{")&&n.value.endsWith("}"),r=(o&&void 0!==n.referencedValue?n.referencedValue:n.value,n.path.split("/").slice(2).join("/")),a=n.resolvedFrom?`data-resolved-from="${n.resolvedFrom}"`:"";t+=`\n      <div class="token-preview-item generic-preview-item" \n           data-token-path="${n.path}" \n           data-token-value="${n.value}" \n           data-token-type="${n.type}"\n           ${n.referencedValue?`data-referenced-value="${n.referencedValue}"`:""}\n           ${n.referencedType?`data-referenced-type="${n.referencedType}"`:""}\n           ${a}>\n        <div class="generic-swatch">\n          <div class="generic-indicator">${e.charAt(0).toUpperCase()}</div>\n          ${o?'<div class="reference-icon-small">↗</div>':""}\n        </div>\n        <div class="token-info">\n          <div class="token-path">${r}</div>\n          <div class="token-value">\n            ${n.value}\n            ${o?'<span class="reference-label">Reference</span>':""}\n            ${o&&n.referencedValue?`<span class="resolved-value">${n.referencedValue}</span>`:""}\n          </div>\n        </div>\n      </div>\n    `})),t+="</div>",t}function L(n){return n.replace(/([A-Z])/g," $1").replace(/^./,(n=>n.toUpperCase())).trim()}function j(n,e,t){return t&&Array.from(t.values()).flat(),function(n,e){const t=E(n);let o="";return 0===t.unresolvedReferences.length?o='\n      <div class="reference-diagnosis">\n        <h3>Reference Analysis</h3>\n        <div class="diagnosis-success">\n          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n            <path d="M8 0C3.6 0 0 3.6 0 8C0 12.4 3.6 16 8 16C12.4 16 16 12.4 16 8C16 3.6 12.4 0 8 0ZM7 11.4L3.6 8L5 6.6L7 8.6L11 4.6L12.4 6L7 11.4Z" fill="#22863a"/>\n          </svg>\n          <span>All references were resolved successfully!</span>\n        </div>\n      </div>\n    ':(o=`\n      <div class="reference-diagnosis">\n        <h3>Reference Analysis</h3>\n        <div class="diagnosis-summary">\n          Found ${t.unresolvedReferences.length} unresolved references.\n          ${t.suggestedFixes.length>0?`${t.suggestedFixes.length} can be automatically fixed.`:""}\n        </div>\n        \n        <div class="unresolved-references">\n          <h4>Unresolved References</h4>\n          <table class="reference-table">\n            <thead>\n              <tr>\n                <th>Token Path</th>\n                <th>Reference</th>\n                <th>Potential Matches</th>\n              </tr>\n            </thead>\n            <tbody>\n    `,t.unresolvedReferences.forEach((n=>{let e="";e=n.potentialMatches.length>0?n.potentialMatches.map((n=>`<div class="potential-match" data-similarity="${Math.round(100*n.similarity)}%">\n                          <span class="match-path">${n.path}</span>\n                          <span class="match-similarity">${Math.round(100*n.similarity)}%</span>\n                        </div>`)).join(""):'<div class="no-matches">No potential matches found</div>',o+=`\n        <tr>\n          <td>${n.path}</td>\n          <td class="reference-value">{${n.reference}}</td>\n          <td>${e}</td>\n        </tr>\n      `})),o+="\n            </tbody>\n          </table>\n        </div>\n    ",t.suggestedFixes.length>0&&(o+='\n        <div class="suggested-fixes">\n          <h4>Suggested Fixes</h4>\n          <div class="fix-description">\n            These references can be automatically fixed by updating the paths.\n          </div>\n          <table class="reference-table">\n            <thead>\n              <tr>\n                <th>Token Path</th>\n                <th>Original</th>\n                <th>Suggested</th>\n                <th>Action</th>\n              </tr>\n            </thead>\n            <tbody>\n      ',t.suggestedFixes.forEach(((n,e)=>{o+=`\n          <tr>\n            <td>${n.path}</td>\n            <td class="reference-value">${n.original}</td>\n            <td class="reference-value suggested">${n.suggested}</td>\n            <td>\n              <button class="fix-button" data-fix-index="${e}">Apply</button>\n            </td>\n          </tr>\n        `})),o+='\n            </tbody>\n          </table>\n          <div class="fix-actions">\n            <button id="apply-all-fixes">Apply All Fixes</button>\n          </div>\n        </div>\n      '),o+='\n      <div class="reference-recommendations">\n        <h4>Recommendations</h4>\n        <ul>\n          <li>Review the token structure to ensure consistent naming patterns</li>\n          <li>Use explicit paths in references when possible</li>\n          <li>Consider organizing tokens in a flat structure for easier reference resolution</li>\n          <li>For Style Dictionary compatibility, ensure references use the same format</li>\n        </ul>\n      </div>\n    ',o+="</div>"),e.innerHTML=o,t}(n,e)}function A(n,e,t){const o=E(e),r=n.querySelector("#apply-all-fixes");r&&r.addEventListener("click",(()=>{const n=function(n,e){let t=JSON.parse(JSON.stringify(n));for(const n of e)t=R(t,n);return t}(e,o.suggestedFixes);t(n)})),n.querySelectorAll(".fix-button").forEach((n=>{n.addEventListener("click",(n=>{const r=parseInt(n.currentTarget.dataset.fixIndex||"0"),a=R(e,o.suggestedFixes[r]);t(a)}))}))}function R(n,e){const t=JSON.parse(JSON.stringify(n)),o=e.path.split(".");let r=t;for(let n=0;n<o.length;n++){const a=o[n];if(void 0===r[a])return console.warn(`Path ${e.path} not found in token data`),t;n===o.length-1?r[a].$value===e.original&&(r[a].$value=e.suggested):r=r[a]}return t}m.styleTagTransform=v(),m.setAttributes=d(),m.insert=l().bind(null,"head"),m.domAPI=i(),m.insertStyleElement=u(),r()(g.A,m),g.A&&g.A.locals&&g.A.locals;let T,M=null,N=null,W=[],V=new Map,O=null,I=!0,P=[],B={resolved:0,unresolved:0};const q=document.getElementById("output"),D=document.getElementById("status"),U=document.getElementById("download-btn"),H=document.getElementById("extract-btn"),J=document.getElementById("validate-btn"),_=document.getElementById("collection-modes-list"),X=document.getElementById("toggle-all-collections"),Z=document.getElementById("validate-references"),Y=document.getElementById("flat-structure"),G=document.getElementById("separate-files"),K=document.getElementById("format-dtcg"),Q=document.getElementById("format-legacy"),nn=document.getElementById("reference-validation-results"),en=document.getElementById("validation-content"),tn=document.getElementById("preview-tabs"),on=document.querySelector(".preview-content"),rn=document.getElementById("visual-preview-container"),an=document.createElement("style");function sn(n){if("combined"===n)return b(M,W,V,Y.checked);const[e,t]=n.split("-");return e&&t&&M[e]&&M[e][t]?{[e]:{[t]:M[e][t]}}:{}}function ln(){var n;if(!M)return;const e=[];V.forEach(((n,t)=>{n.forEach((n=>{e.push(n)}))}));const t=b(M,W,V,Y.checked);q.textContent=h(t);const o=n=>{const e=rn.querySelector(".token-preview-wrapper");e&&e.remove(),z(n,rn,0,((n,e)=>{B={resolved:n,unresolved:e},e>0?(D.textContent=`Found ${n} resolved and ${e} unresolved references. Click "Reference Diagnoser" for details.`,D.className="warning"):n>0&&(D.textContent=`All ${n} references resolved successfully.`,D.className="success")}))};!function(n,e,t,o,r,a,i,s){var l;a.querySelectorAll('.tab-button:not([data-tab="combined"])').forEach((n=>n.remove())),i.querySelectorAll(".tab-content:not(#tab-combined)").forEach((n=>n.remove()));const c=function(n,e,t,o){const r=[];for(const a of e)if(n[a]){const e=t.get(a)||[];for(const t of e)if(n[a][t]){const e=o?k(`${a}.${t}`,n[a][t]):{[a]:{[t]:n[a][t]}};r.push({id:`${a}-${t}`,name:`${a}/${t}`,data:e})}}return r}(n,e,t,o);c.forEach((n=>{const e=document.createElement("button");e.className="tab-button",e.dataset.tab=n.id,e.textContent=n.name,e.addEventListener("click",(e=>{e.preventDefault(),y(n.id,a,i,n.data,s),s&&s(n.data)})),a.appendChild(e);const t=document.createElement("div");t.className="tab-content",t.id=`tab-${n.id}`,t.style.display="none";const o=document.createElement("pre");o.textContent=h(n.data),t.appendChild(o),i.appendChild(t)}));const d=a.querySelector('.tab-button[data-tab="combined"]');if(d){const o=d.cloneNode(!0);null===(l=d.parentNode)||void 0===l||l.replaceChild(o,d),o.addEventListener("click",(o=>{o.preventDefault();const r={};for(const o of e)if(n[o]){r[o]={};const e=t.get(o)||[];for(const t of e)n[o][t]&&(r[o][t]=n[o][t])}y("combined",a,i,r,s)}))}const p={};for(const o of e)if(n[o]){p[o]={};const e=t.get(o)||[];for(const t of e)n[o][t]&&(p[o][t]=n[o][t])}y("combined",a,i,p,s)}(M,W,V,Y.checked,G.checked,tn,on,o);const r=(null===(n=document.querySelector(".tab-button.active"))||void 0===n?void 0:n.getAttribute("data-tab"))||"combined";var a;o("combined"===r?t:sn(r)),U.disabled=0===Object.keys(t).length,Z.checked&&(a=V,Array.from(a.values()).flat(),P=function(n){const e=[],t=new Map;function o(n,e=""){if(n&&"object"==typeof n&&!Array.isArray(n))if(void 0===n.$value)for(const r in n){const a=e?`${e}/${r}`:r,i=n[r];"object"==typeof i&&null!==i?o(i,a):t.set(a,i)}else t.set(e,n.$value)}function r(n,o=""){if(n&&"object"==typeof n&&!Array.isArray(n)){if(n.$value&&"string"==typeof n.$value&&n.$value.startsWith("{")&&n.$value.endsWith("}")){const r=n.$value.substring(1,n.$value.length-1);let a=!1;for(const[n,e]of t.entries())if(n===r||n.endsWith(`/${r}`)){a=!0;break}a||e.push({path:o,reference:r,message:`Reference '${r}' not found in tokens`})}for(const a in n){const i=o?`${o}/${a}`:a,s=n[a];if("object"==typeof s&&null!==s)r(s,i);else if("string"==typeof s&&s.startsWith("{")&&s.endsWith("}")){const n=s.substring(1,s.length-1);let o=!1;for(const[e,r]of t.entries())if(e===n||e.endsWith(`/${n}`)){o=!0;break}o||e.push({path:i,reference:n,message:`Reference '${n}' not found in tokens`})}}}}for(const e in n)for(const t in n[e])o(n[e][t],`${e}/${t}`);for(const e in n)for(const t in n[e])r(n[e][t],`${e}/${t}`);return e}(t),P.length>0?(D.textContent=`Found ${P.length} reference problems. Click "Validate References" for details.`,D.className="warning"):(D.textContent="All references are valid.",D.className="success"))}an.textContent="\n    .reference-diagnosis {\n      margin-top: 20px;\n      padding: 12px;\n      border-radius: 4px;\n      border: 1px solid #e0e0e0;\n      background-color: #f9f9f9;\n    }\n    \n    .reference-diagnosis h3 {\n      margin-top: 0;\n      margin-bottom: 12px;\n      font-size: 14px;\n      font-weight: 600;\n    }\n    \n    .reference-diagnosis h4 {\n      margin-top: 16px;\n      margin-bottom: 8px;\n      font-size: 13px;\n      font-weight: 500;\n    }\n    \n    .diagnosis-success {\n      display: flex;\n      align-items: center;\n      padding: 8px 12px;\n      background-color: #e6ffed;\n      border-radius: 4px;\n      color: #22863a;\n      font-weight: 500;\n    }\n    \n    .diagnosis-success svg {\n      margin-right: 8px;\n    }\n    \n    .diagnosis-summary {\n      padding: 8px 12px;\n      background-color: #fff8e1;\n      border-radius: 4px;\n      color: #b08800;\n      margin-bottom: 12px;\n    }\n    \n    .reference-table {\n      width: 100%;\n      border-collapse: collapse;\n      font-size: 11px;\n      margin-bottom: 16px;\n    }\n    \n    .reference-table th {\n      text-align: left;\n      padding: 6px 8px;\n      background-color: #f0f0f0;\n      border: 1px solid #e0e0e0;\n    }\n    \n    .reference-table td {\n      padding: 6px 8px;\n      border: 1px solid #e0e0e0;\n      vertical-align: top;\n    }\n    \n    .reference-value {\n      font-family: monospace;\n      color: #0366d6;\n    }\n    \n    .reference-value.suggested {\n      color: #22863a;\n      font-weight: 500;\n    }\n    \n    .potential-match {\n      display: flex;\n      justify-content: space-between;\n      padding: 4px 0;\n      border-bottom: 1px solid #f0f0f0;\n    }\n    \n    .potential-match:last-child {\n      border-bottom: none;\n    }\n    \n    .match-path {\n      font-family: monospace;\n    }\n    \n    .match-similarity {\n      margin-left: 8px;\n      color: #666;\n      font-size: 10px;\n    }\n    \n    .no-matches {\n      color: #d73a49;\n      font-style: italic;\n    }\n    \n    .fix-button {\n      background-color: #0366d6;\n      color: white;\n      padding: 3px 8px;\n      border: none;\n      border-radius: 3px;\n      cursor: pointer;\n      font-size: 10px;\n      margin: 0;\n    }\n    \n    .fix-button:hover {\n      background-color: #0056b3;\n    }\n    \n    .fix-actions {\n      margin-top: 12px;\n      text-align: right;\n    }\n    \n    .fix-description {\n      margin-bottom: 8px;\n      color: #666;\n      font-size: 11px;\n    }\n    \n    .reference-recommendations {\n      background-color: #f0f7ff;\n      padding: 8px 12px;\n      border-radius: 4px;\n      margin-top: 16px;\n    }\n    \n    .reference-recommendations ul {\n      margin: 8px 0 0 0;\n      padding-left: 20px;\n    }\n    \n    .reference-recommendations li {\n      margin-bottom: 4px;\n      font-size: 11px;\n    }\n  ",document.head.appendChild(an),document.addEventListener("DOMContentLoaded",(()=>{var n;console.log("UI loaded and initialized"),D.textContent="Extracting tokens...",D.className="info",function(){const n=document.getElementById("color-hex"),e=document.getElementById("color-rgb"),t=document.getElementById("color-rgba"),o=document.getElementById("color-hsl"),r=document.getElementById("color-hsla");let a="hex";function i(n){console.log(`Sending color format to plugin: ${n}`),parent.postMessage({pluginMessage:{type:"apply-color-format",colorFormat:n}},"*")}n.addEventListener("change",(()=>{n.checked&&"hex"!==a&&(a="hex",i(a))})),e.addEventListener("change",(()=>{e.checked&&"rgb"!==a&&(a="rgb",i(a))})),t.addEventListener("change",(()=>{t.checked&&"rgba"!==a&&(a="rgba",i(a))})),o.addEventListener("change",(()=>{o.checked&&"hsl"!==a&&(a="hsl",i(a))})),r.addEventListener("change",(()=>{r.checked&&"hsla"!==a&&(a="hsla",i(a))})),a="hex",n.checked=!0}(),T=function(){const n=document.querySelector('.segmented-toggle-option[data-mode="json"]'),e=document.querySelector('.segmented-toggle-option[data-mode="visual"]'),t=document.querySelector(".preview-content-json"),o=document.querySelector(".preview-content-visual");let r="json";return n.addEventListener("click",(()=>{"json"!==r&&(n.classList.add("active"),e.classList.remove("active"),t.classList.add("active"),o.classList.remove("active"),r="json")})),e.addEventListener("click",(()=>{"visual"!==r&&(e.classList.add("active"),n.classList.remove("active"),o.classList.add("active"),t.classList.remove("active"),r="visual")})),{setMode:t=>{"json"===t?n.click():e.click()},getCurrentMode:()=>r}}(),function(){if(!tn.querySelector('.tab-button[data-tab="combined"]')){const n=document.createElement("button");n.className="tab-button active",n.dataset.tab="combined",n.textContent="Combined",n.addEventListener("click",(n=>{if(n.preventDefault(),y("combined",tn,on),"visual"===T.getCurrentMode()){const n=sn("combined"),e=rn.querySelector(".token-preview-wrapper");e&&e.remove(),z(n,rn)}})),tn.appendChild(n)}if(!document.getElementById("tab-combined")){const n=document.createElement("div");if(n.className="tab-content",n.id="tab-combined",n.style.display="block",q.parentNode){const e=q.cloneNode(!0);n.appendChild(e)}else n.appendChild(q);on.appendChild(n)}}(),K.addEventListener("change",ln),Q.addEventListener("change",ln),Z.addEventListener("change",ln),Y.addEventListener("change",ln),G.addEventListener("change",ln),X.addEventListener("click",(()=>{const n=function(n,e,t){const o=e.querySelectorAll("input[data-collection]:not([data-mode])"),r=e.querySelectorAll("input[data-mode]");for(let e=0;e<o.length;e++)o[e].checked=n;for(let e=0;e<r.length;e++)r[e].checked=n;const a=[],i=new Map,s=Object.keys(t);return n?s.forEach((n=>{a.push(n);const e=Object.keys(t[n]);i.set(n,[...e])})):s.forEach((n=>{i.set(n,[])})),{selectedCollections:a,selectedModes:i,allCollections:s}}(!I,_,M);W=n.selectedCollections,V=n.selectedModes,O=n.allCollections,I=!I,X.textContent=I?"Deselect All":"Select All",ln()})),J.addEventListener("click",(()=>{var n;if(function(n,e,t){if(0===n.length)e.innerHTML='<div class="success">All references are valid! Your tokens are ready to use with Style Dictionary.</div>';else{let t=`<div class="warning">Found ${n.length} reference problems:</div><ul>`;for(const e of n)t+=`<li class="reference-problem">\n                  Token at <strong>${e.path}</strong> \n                  references <strong>${e.reference}</strong> which cannot be resolved\n                 </li>`;t+="</ul>",t+='<div class="validation-tools">\n                <p>Recommendations:</p>\n                <ul>\n                  <li>Try using the "Flat Structure" option for easier reference resolution</li>\n                  <li>Check that all referenced tokens exist in the exported collections/modes</li>\n                  <li>Consider simplifying your token structure for better compatibility</li>\n                </ul>\n              </div>',e.innerHTML=t}t.style.display="block"}(P,en,nn),M){const e=(null===(n=document.querySelector(".tab-button.active"))||void 0===n?void 0:n.getAttribute("data-tab"))||"combined",t="combined"===e?b(M,W,V,Y.checked):sn(e),o=document.createElement("div");o.id="reference-diagnosis-container",en.appendChild(o),j(t,o),A(o,t,(n=>{var r;if("combined"===e)M=n;else{const[t,o]=e.split("-");t&&o&&(null===(r=n[t])||void 0===r?void 0:r[o])&&(M[t][o]=n[t][o])}ln(),D.textContent="References fixed successfully!",D.className="success",j(t,o)}))}})),H.addEventListener("click",(()=>{nn.style.display="none",q.textContent="Loading data...",D.textContent="Extracting tokens...",D.className="info",_.innerHTML='\n      <div class="loading">\n        <div class="spinner"></div>\n        Loading collections and modes...\n      </div>\n    ',U.disabled=!0,parent.postMessage({pluginMessage:{type:"extract-tokens"}},"*")})),U.addEventListener("click",(()=>{const n=[];if(V.forEach(((e,t)=>{e.forEach((e=>{n.push(e)}))})),G.checked){const n=function(n,e,t,o){const r=b(n,e,t,o),a=[];if(o);else for(const n in r)for(const e in r[n])a.push({name:`${n}-${e}.json`,data:{[n]:{[e]:r[n][e]}}});return a.push({name:"design-tokens-all.json",data:r}),a}(M,W,V,Y.checked);!function(n,e,t){if(1===n.length)return void x(n[0].data,n[0].name);const o=document.createElement("div");o.style.display="none",document.body.appendChild(o);let r="<p>Multiple files are ready for download:</p><ul>";n.forEach(((n,e)=>{const t=JSON.stringify(n.data,null,2),a=new Blob([t],{type:"application/json"}),i=URL.createObjectURL(a),s=document.createElement("a");s.href=i,s.download=n.name,s.textContent=`Download ${n.name}`,s.id=`download-link-${e}`,s.className="download-link",o.appendChild(s),r+=`<li><a href="#" onclick="document.getElementById('download-link-${e}').click(); return false;">${n.name}</a></li>`})),r+="</ul>",e.innerHTML=r,t.style.display="block";const a=o.querySelector(".download-link");a&&a.click()}(n,en,nn),D.textContent="Files ready for download. Click the links above to download each file.",D.className="success"}else x(b(M,W,V,Y.checked),`design-tokens-${K.checked?"dtcg":"legacy"}-${(new Date).toISOString().split("T")[0]}.json`),D.textContent="Tokens downloaded successfully!",D.className="success"}));const e=document.createElement("button");e.id="diagnose-references-btn",e.textContent="Reference Diagnoser",e.addEventListener("click",(()=>{var n;nn.style.display="block",en.innerHTML="<h3>Reference Diagnosis</h3>";const e=document.createElement("div");e.id="reference-diagnosis-container",en.appendChild(e);const t=(null===(n=document.querySelector(".tab-button.active"))||void 0===n?void 0:n.getAttribute("data-tab"))||"combined",o="combined"===t?b(M,W,V,Y.checked):sn(t);j(o,e),A(e,o,(n=>{var r;if("combined"===t)M=n;else{const[e,o]=t.split("-");e&&o&&(null===(r=n[e])||void 0===r?void 0:r[o])&&(M[e][o]=n[e][o])}ln(),D.textContent="References fixed successfully!",D.className="success",j(o,e)}))})),null===(n=J.parentNode)||void 0===n||n.insertBefore(e,J.nextSibling)})),window.onmessage=n=>{if(console.log("UI received message:",n.data),n.data.pluginMessage){const e=n.data.pluginMessage;if("tokens-data"===e.type){console.log("UI received tokens data"),N=JSON.parse(JSON.stringify(e.data)),M=e.data;const n=function(n,e,t){if(!n)return{selectedCollections:[],selectedModes:new Map,allCollections:[]};e.innerHTML="";const o=Object.keys(n);if(0===o.length)return e.innerHTML="<div>No collections found</div>",{selectedCollections:[],selectedModes:new Map,allCollections:[]};const r=[...o],a=new Map,i=[...o];return o.forEach((o=>{const i=document.createElement("div");i.className="collection-item",i.dataset.collection=o;const s=Object.keys(n[o]);a.set(o,[...s]);const l=document.createElement("div");l.className="collection-header";const c=document.createElement("input");c.type="checkbox",c.id=`collection-${o}`,c.checked=!0,c.dataset.collection=o;const d=document.createElement("span");d.className="collection-toggle expander-icon expanded",d.dataset.collection=o;const p=document.createElement("label");p.htmlFor=`collection-${o}`,p.textContent=o;const u=document.createElement("span");u.className="collection-badge",u.textContent=`${s.length} modes`,l.appendChild(d),l.appendChild(c),l.appendChild(p),l.appendChild(u);const f=document.createElement("div");f.className="mode-container",f.dataset.collection=o,s.forEach((e=>{const i=document.createElement("div");i.className="mode-item";const s=document.createElement("input");s.type="checkbox",s.id=`mode-${o}-${e}`,s.checked=!0,s.dataset.collection=o,s.dataset.mode=e;const l=document.createElement("label");l.htmlFor=`mode-${o}-${e}`;const d=function(n){let e=0;return function n(t){if(t&&"object"==typeof t)if(void 0===t.$value||void 0===t.$type)for(const o in t)"object"==typeof t[o]&&null!==t[o]?n(t[o]):"$type"!==o&&"$description"!==o&&e++;else e++}(n),e}(n[o][e]);l.textContent=`${e}`;const p=document.createElement("span");p.className="token-count",p.textContent=`(${d} tokens)`,l.appendChild(p),i.appendChild(s),i.appendChild(l),f.appendChild(i),s.addEventListener("change",(()=>{const n=a.get(o)||[];if(s.checked)n.includes(e)||(n.push(e),a.set(o,n));else{const t=n.filter((n=>n!==e));if(a.set(o,t),0===t.length){c.checked=!1;const n=r.indexOf(o);n>-1&&r.splice(n,1)}}t()}))})),c.addEventListener("change",(()=>{const n=f.querySelectorAll('input[type="checkbox"]');if(c.checked){r.includes(o)||r.push(o);for(let e=0;e<n.length;e++){const t=n[e];t.checked=!0;const r=t.dataset.mode;if(r){const n=a.get(o)||[];n.includes(r)||(n.push(r),a.set(o,n))}}}else{const e=r.indexOf(o);e>-1&&r.splice(e,1);for(let e=0;e<n.length;e++)n[e].checked=!1;a.set(o,[])}t()})),d.addEventListener("click",(()=>{d.classList.contains("expanded")?(d.classList.remove("expanded"),f.style.display="none"):(d.classList.add("expanded"),f.style.display="block")})),i.appendChild(l),i.appendChild(f),e.appendChild(i)})),{selectedCollections:r,selectedModes:a,allCollections:i}}(M,_,ln);W=n.selectedCollections,V=n.selectedModes,O=n.allCollections,I=!0,X.textContent=I?"Deselect All":"Select All",ln(),D.textContent="Tokens extracted successfully!",D.className="success"}else"error"===e.type&&(console.error("UI received error:",e.message),q.textContent="Error: "+e.message,D.textContent=e.message,D.className="error")}},console.log("UI sending ready message to plugin"),parent.postMessage({pluginMessage:{type:"ui-ready"}},"*")})();</script></body></html>